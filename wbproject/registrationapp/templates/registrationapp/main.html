{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet", href="{% static 'header.css' %}">
    <link rel="stylesheet", href="{% static 'dostavka.css' %}">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}" type="image/x-icon">   
    
</head>
<body>
    <header>
        <img src="{% static 'logo.png' %}" alt="">
        <ul>
            <li style="padding:12px 32px;background:#224F55; border-radius:10px"><a href="/main" style="color:white;">Доставка</a></li>
            <li style="padding:12px 32px;"><a href="/main2">Створити замовлення</a></li>
            <li style="padding:12px 32px;"><a href="/main3">Склади</a></li>
        </ul>
        <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="logout">
              <img src="{% static 'logout-icon.png' %}" alt="Logout">
              <span>Вийти</span>
            </button>
          </form>
        
    </header>
    <div class="start">
        <div class="text">
            <h1 class="main_h1">Доставка</h1>
            <div class="selector">
                <a href="#" style="justify-content: center;
                background: #FFFFFF;
                box-shadow: 0px 4px 13px rgba(0, 0, 0, 0.15);
                border-radius: 10px;
                width: 136px;
                height: 33px;
                display: flex;
                align-items: center;">
                    У планах
                </a>
                <a href="dostavka_now.html">
                    У дорозі
                </a>
                <a href="dostavka_comp.html" style="padding-right:20px;">
                    Завершені
                </a>
            </div>
        </div>
    </div>
    
        <section class="main_section">
            <div class="left">
                <div class="all_orders">
                    {% if orders %}
                      <ul>
                        {% for order in orders %}
                          <li data-order-id="{{ order.id }}">
                            <img src="../static/sklad-icon.png">
                            <div>
                              <h3>{{ order.name }}</h3>
                              <h4>{{ order.destination }}</h4>
                              </div>
                          </li>
                        {% endfor %}
                      </ul>
                      {% else %}
                      
                    {% endif %}
                  </div>
            </div>
            <div class="right">

            </div>
        </section>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const orderList = document.querySelector('.all_orders');

        orderList.addEventListener('click', function(event) {
            if (event.target.tagName === 'LI') {
                const orderId = event.target.dataset.orderId;
                fetchOrderDetails(orderId);
            }
        });
    });

    function fetchOrderDetails(orderId) {
        // Make an AJAX request to fetch warehouse details
        fetch(`/api/order/${orderId}/`) 
            .then(response => response.json())
            .then(data => {
                // Populate warehouse details in the right side
                const orderInfo = document.getElementById('order_info');
                orderInfo.innerHTML = `
                    <h3>${data.name}</h3>
                    <p><strong>Розташування:</strong> ${data.destination}</p>
                    // <h4>Товари:</h4>
                    // <ul>
                    //     ${data.products.map(product => `<li>${product.name} - ${product.weight} кг (${product.amount} шт.)</li>`).join('')}
                    // </ul>
                    // <h4>Авто:</h4>
                    // <ul>
                    //     ${data.vehicles.map(vehicle => `<li>${vehicle.name} - Місткість: ${vehicle.capacity} кг, Споживання бензину: ${vehicle.fuel_amount} л/100км</li>`).join('')}
                    // </ul>
                `;
            })
            .catch(error => console.error('Error fetching order details:', error));
    }
</script>
</body>
</html>